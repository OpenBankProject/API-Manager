{% extends 'metrics/summary.html' %}
{% load static %}
{% load mathfilters %}

{% block nav_tabs %}
			<li><a href="{% url 'yearly-summary' %}?{{ request.GET.urlencode }}">Year</a></li>
			<li><a href="{% url 'quarterly-summary' %}?{{ request.GET.urlencode }}">Quarter</a></li>
			<li><a href="{% url 'metrics-summary' %}?{{ request.GET.urlencode }}">Month</a></li>
    		<li><a href="{% url 'weekly-summary' %}?{{ request.GET.urlencode }}">Week</a></li>
			<li class="active"><a href="{% url 'daily-summary' %}?{{ request.GET.urlencode }}">Day</a></li>
			<li><a href="{% url 'hourly-summary' %}?{{ request.GET.urlencode }}">Hour</a></li>
			<li><a href="{% url 'custom-summary' %}?{{ request.GET.urlencode }}">Custom</a></li>
{% endblock nav_tabs %}

{% block tab_content %}
  <div class="tab-pane active">
    			<h2>Period : From {{ from_date }} to {{ to_date }}</h2>

		<table border="1">
			<tr>
				<td>Total API calls:</td>
				<td>{{ api_calls }}</td>
			</tr>
			<tr>
				<td>API calls made using API Explorer:</td>
				<td>{{ calls_by_api_explorer }} ({% widthratio calls_by_api_explorer api_calls 100 %} %)</td>
			</tr>
			<!--<tr>-->
				<!--<td>Calls per hour:</td>-->
				<!--<td>{%for item in calls_per_hour_list%}<li>{{item}}</li>{% endfor %}</td>-->
			<!--</tr>-->
			<tr>
				<td>Calls per hour:</td>
				<!--<td>{%for item in calls_per_day%}<li>{{item}}</li>{% endfor %}</td>-->
				<td><img src="data:image/png;base64, {{ per_hour_chart }}" alt="somealt" /></td>
			</tr>
			<tr>
				<td>Average number of calls per hour: </td>
				<td>{{ api_calls|intdiv:24 }}</td>
			</tr>
			<tr>
				<td>Average response time (ms):</td>
				<td>{{ average_response_time }}</td>
			</tr>

			<tr>
				<td>Median time from consumer registration to first API call:</td>
				<td>[]</td>
			</tr>

			<tr>
				<td>Apps with distinct names:</td>
				<td>{{ number_of_apps_with_unique_app_name }}</td>
			</tr>
			<tr>
				<td>Apps with distinct developer email addresses:</td>
				<td>{{ number_of_apps_with_unique_developer_email }}</td>
			</tr>
			<!--<tr>
				<td>App names:</td>
				<td>{%for item in unique_app_names%}{{item}}, {% endfor %}</td>
			</tr>-->
			<tr>
				<td>Active apps:</td>
				<td>{%for item in active_apps_list%} <p>{{item.app_name}} ({{ item.developer_email }})</p> {% endfor %}</td>
			</tr>
			<tr>
				<td>Top 10 APIs:</td>
				<td><img src="data:image/png;base64, {{ top_apis_bar_chart }}" alt="somealt" /></td>
			</tr>
			<tr>
				<td>Top Warehouse APIs:</td>
				<td>{% if top_warehouse_apis %}{%for element in top_warehouse_apis%} <p>{{ element.Implemented_by_partial_function }} : {{ element.count }}</p> {% endfor %}{% else %} <p>N/A</p>{% endif %}</td>
			</tr>
			<tr>
				<td>Top Apps using data warehouse:</td>
				<td>{% if top_apps_using_warehouse %}{%for element in top_apps_using_warehouse%} <p>{{ element.app_name }} ({{ element.developer_email }}) : {{ element.count }}</p> {% endfor %}{% else %} <p>N/A</p>{% endif %}</td>
			</tr>
			<tr>
				<td>Total number of CanSearchWarehouse users:</td>
				<td>{{number_of_users_with_cansearchwarehouse}}</td>
			</tr>

			<tr>
				<td>Users with role CanSearchWarehouse:</td>
				<!--<td bgcolor="#FF0000">{%for user in users_with_cansearchwarehouse%} {{user}}, {%endfor%} {%for email in email_with_cansearchwarehouse%}{{email}}, {%endfor%}</td>-->
				<td>{% if user_email_cansearchwarehouse %}{% for key, value in user_email_cansearchwarehouse.items %} {{key}}, {% endfor %}{% else %} <p>N/A</p>{% endif %}</td>
			</tr>

		</table>    		</div>
{% endblock tab_content %}
